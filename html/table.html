<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/table.css">
    <title>Document</title>
</head>
<body>
    <main class="history">
      <section class="table__body">
        <table class="mytable table-sortable">
          <thead>
            <tr>
              <th scope="col">Date</th>
              <th scope="col">Time</th>
              <th scope="col">Mode</th>
              <th scope="col">Fan</th>
              <th scope="col">Lamp</th>
              <th scope="col">Pump</th>
              <th scope="col">Stepper</th>
              <th scope="col">Humi <br>(%)
              </th>
              <th scope="col">Light <br> (Lux)</th>
              <th scope="col">Rain</th>
              <th scope="col">Soil <br>(%)</th>
              <th scope="col">Temperature <br>(Â°C)</th>
              <th scope="col">Reset</th>
            </tr>
          </thead>
          <tbody id="myTable"> 
          </tbody>
        </table>
      </section>
    </main>
</body>
<script src="../js/sort.js"></script>
<script>
    var api_url = 'https://vuonthongminh-328d9-default-rtdb.firebaseio.com/History.json'   
    async function myCallback(){
        var response = await fetch(api_url);
        var data = await response.json();
        const table = document.getElementById('myTable')
        table.innerHTML=''
        for (var i = 0; i< data.length; i++){
            var row = `<tr>
                        <td>${data[i].Date}</td>
                        <td>${data[i].Time}</td>
                        <td>${data[i].Mode}</td>
                        <td>${data[i].Fan}</td>
                        <td>${data[i].Lamp}</td>
                        <td>${data[i].Pump}</td>
                        <td>${data[i].Stepper}</td>
                        <td>${data[i].Humidity}</td>
                        <td>${data[i].Light}</td>
                        <td>${data[i].Rain}</td>
                        <td>${data[i].Soil}</td>
                        <td>${data[i].Temperature}</td>
                        <td>${data[i].Reset}</td>
                      </tr>`
                      table.innerHTML += row
        }
    }
    myCallback();  
</script>
</html>